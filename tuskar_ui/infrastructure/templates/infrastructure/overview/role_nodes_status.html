{% load i18n %}
{% load url from future %}
{% load horizon %}

<h4>{% trans "Deployment Roles" %}</h4>
<div class="deploy-role-status">
{% for role in roles %}
    <div class="well well-sm clearfix">
      <div class="col-xs-2">
        {% if role.finished %}
          <i class="fa fa-fw fa-3x fa-check text-success"></i>
        {% else %}
          <i class="fa fa-fw fa-3x fa-spinner fa-spin text-info"></i>
        {% endif %}
      </div>
      <div class="col-xs-8 deploy-role-name">
        <strong
          class="deployment-roles-label"
        >{{ role.name|capfirst }}</strong>
      </div>
      <div class="col-xs-2 deploy-role-count">
        {% if  role.finished %}
          <strong>{{ role.deployed_node_count }}</strong>
        {% else %}
          <strong>{{ role.deployed_node_count }}</strong><small class="text-muted">/{{ role.planned_node_count }}</small>
        {% endif %}
      </div>
    </div>
{% endfor %}
</div>

<script type="text/html" id="roles-template">{% spaceless %}{% jstemplate %}
[[#roles]]
    <div class="well well-sm clearfix">
      <div class="col-xs-2 deploy-role-icon">
        [[#finished]]
          <i class="fa fa-fw fa-3x fa-check text-success"></i>
        [[/finished]]
        [[^finished]]
          <i class="fa fa-fw fa-3x fa-spinner fa-spin text-info"></i>
        [[/finished]]
      </div>
      <div class="col-xs-8 deploy-role-name"><strong class="deployment-roles-label" >[[ name ]]</strong></div>
      <div class="col-xs-2 deploy-role-count">
        [[#finished]]
          <strong>[[ deployed_node_count ]]</strong>
        [[/finished]]
        [[^finished]]
          <strong>[[ deployed_node_count ]]</strong>
          <small class="text-muted">/[[ planned_node_count ]]</small>
        [[/finished]]
      </div>

    </div>
[[/roles]]
{% endjstemplate %}{% endspaceless %}</script>
