<div class="well well-small tab-pane{% if active %} active{% endif %}"
     id="tab-{{ form.prefix }}">
  <div class="form form-inline">
    <div class="row-fluid"><div class="span12">
      {{ form.id }}
      {% include 'infrastructure/nodes/_nodes_formset_field.html' with field=form.name required=True %}
      {% include 'infrastructure/nodes/_nodes_formset_field.html' with field=form.description %}
    </div></div>

    <div class="row-fluid"><div class="span12">
      {% include 'infrastructure/nodes/_nodes_formset_field.html' with field=form.image_name %}
      {% include 'infrastructure/nodes/_nodes_formset_field.html' with field=form.flavor_id %}
    </div></div>

    <div class="row-fluid"><div class="span12">
      {% include 'infrastructure/nodes/_nodes_formset_field.html' with field=form.size extra_text=_("instances") %}
    </div></div>
  </div>
</div>

<script type="text/javascript">
(window.$ || window.addHorizonLoadEvent)(function () {
  // Update the name in tab on the left when it's changed in the form.
  var form_prefix = '{{ form.prefix|escapejs }}';
  var $form = $('#tab-' + form_prefix);
  var $nav_link = $('a[href="#' + $form.attr('id') + '"]');
  var undefined_name = '{{ form.get_name|escapejs }}';

  $form.find('input[name$="-name"]').change(function () {
    $nav_link.html($(this).val() || undefined_name);
  });
});
</script>
